{% extends 'base.html' %}


{% block content %}
{% if error %}
        <p>{{ error }}</p>
    {% endif %}


<div class="container-fluid py-4">
  <div class="row">
    <div class="col-12">
      <div class="card my-4 border-white">
        <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
          <div class="bg-gradient-secondary shadow-secondary border-radius-lg pt-4 pb-3">
            <h6 class="text-white text-capitalize ps-3">Mantenedor de Clientes</h6>
          </div>
        </div>

        <br>
        <form name="agrega_clientes" id="agrega_clientes" method="POST">
          <div class="row"  id="f3" style="padding-left: 15px; padding-right: 15px;">
            
            <div class="col">
              <input type="text" id="nombre" name="nombre" class="form-control" min="1" placeholder="Nombre Cliente" aria-label="nombre" required>
            </div>
            <div class="col">
              <input type="number" id="rut" name="rut" class="form-control" min="1" placeholder="Rut" aria-label="rut" required>
            </div>
            <div class="col-1">
              <input type="text" id="dv" name="dv" class="form-control" min="1" placeholder="Dv" aria-label="dv" required>
            </div>
            
            <!-- <div class="col">
              <input type="text" id="giro" name="giro" class="form-control" min="1" placeholder="Giro" aria-label="giro" required>
            </div> -->
            
            <div class="col">
              <button type="submit" class="btn bg-gradient-info w-100">Agregar</button>
            </div>
          </div>
        </form>
        <br>
        <div class="card-body px-0 pb-2" name="div_cliente" id="div_cliente">
          <div class="table-responsive p-0">
            <table class="table align-items-center mb-0">
              <thead>
                <tr>
                  <th class="text-uppercase text-secondary text-xs font-weight-bolder opacity-7">ID</th>
                  <th class="text-uppercase text-secondary text-xs font-weight-bolder opacity-7">Nombre Cliente</th>
                  <th class="text-uppercase text-secondary text-xs font-weight-bolder opacity-7 ps-2">Rut</th>
                  <!-- <th class="text-uppercase text-secondary text-xs font-weight-bolder opacity-7 ps-2">Giro</th> -->
                  <!-- <th></th> -->
                  <th></th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                {%for i in clientes%}
                <tr>
                  <td>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">{{i.id}}</h6>
                      </div>
                  </td>
                  <td>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">{{i.nombre}}</h6>
                      </div>
                  </td>
                  <td>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">{{i.rut}} - {{i.dv}}</h6>
                      </div>
                  </td>
                  <!-- <td>
                    <div class="d-flex px-2 py-1">
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">xxxxxxx</h6>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div class="d-flex px-2 py-1">
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="mb-0 text-sm">xxxxxxx</h6>
                      </div>
                    </div>
                  </td> -->
                  <td style="width: 50px;"><button class="btn btn-info w-100"><a href="javascript:ediciones('edita_cliente?id={{i.id}}')"  style="color: black; text-decoration: none;">Editar</a></button></td>

                  <td style="width: 50px;"><button onClick="delete_cliente({{i.id}})"  class="btn btn-danger w-100 " > <span class="iconify" style="color: black; " data-width=" 26" data-height="26"></span>&nbsp; Eliminar</button></td>
                </tr>
                {%endfor%}

              </tbody>
            </table>
          </div>



        </div>
      </div>
    </div>
  </div>
</div>
<script src="{{ url_for('static', filename='js/otro.js')}}"></script>
<script>
  function ediciones(URL) {
    var ventana = window.open(URL, "ventana1", "width=850,height=650,scrollbars=auto");
  
    // Define una función que se ejecutará cuando la ventana se cierre
    ventana.onunload = function() {
      // Carga los elementos en la página emisora cuando la ventana se cierre
      $("#div_clientes").load(window.location.href + " #div_clientes");
    };
  }
  </script>

{% endblock %}